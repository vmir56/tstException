# main.py
from users.models import User, UserManager, UserAlreadyExistsError, UserNotFoundError


def main():
    print("üî∑ –°–ò–°–¢–ï–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò")
    print("üî∑ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏")
    print("="*60)
    
    # –°–æ–∑–¥–∞—ë–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞
    manager = UserManager()
    
    # ===========================================
    # 1. –£–°–ü–ï–®–ù–û–ï –î–û–ë–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô
    # ===========================================
    print("\n‚úÖ –£–°–ü–ï–®–ù–û–ï –î–û–ë–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô")
    print("-"*40)
    
    user1 = User("ivan", "ivan@mail.com", 25)
    user2 = User("maria", "maria@mail.com", 30)
    user3 = User("petr", "petr@mail.com", 35)
    
    try:
        manager.add_user(user1)
        print(f"‚úì –î–æ–±–∞–≤–ª–µ–Ω: {user1}")
        
        manager.add_user(user2)
        print(f"‚úì –î–æ–±–∞–≤–ª–µ–Ω: {user2}")
        
        manager.add_user(user3)
        print(f"‚úì –î–æ–±–∞–≤–ª–µ–Ω: {user3}")
        
    except UserAlreadyExistsError as e:
        print(f"‚úó –û—à–∏–±–∫–∞: {e}")
    
    # ===========================================
    # 2. –ü–û–ü–´–¢–ö–ê –î–û–ë–ê–í–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –ò–ú–ï–ù–ï–ú
    # ===========================================
    print("\n‚ö†Ô∏è –ü–û–ü–´–¢–ö–ê –î–û–ë–ê–í–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –ò–ú–ï–ù–ï–ú")
    print("-"*40)
    
    user_duplicate = User("ivan", "ivan2@mail.com", 40)
    
    try:
        manager.add_user(user_duplicate)
        print(f"‚úì –î–æ–±–∞–≤–ª–µ–Ω: {user_duplicate}")
    except UserAlreadyExistsError as e:
        print(f"‚úó –ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: {e}")
    
    # ===========================================
    # 3. –£–°–ü–ï–®–ù–´–ô –ü–û–ò–°–ö –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
    # ===========================================
    print("\n‚úÖ –£–°–ü–ï–®–ù–´–ô –ü–û–ò–°–ö –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø")
    print("-"*40)
    
    try:
        found_user = manager.find_user("maria")
        print(f"‚úì –ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {found_user}")
    except UserNotFoundError as e:
        print(f"‚úó –û—à–∏–±–∫–∞: {e}")
    
    # ===========================================
    # 4. –ü–û–ò–°–ö –ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
    # ===========================================
    print("\n‚ö†Ô∏è –ü–û–ò–°–ö –ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø")
    print("-"*40)
    
    try:
        not_found = manager.find_user("alex")
        print(f"‚úì –ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {not_found}")
    except UserNotFoundError as e:
        print(f"‚úó –ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: {e}")
    
    # ===========================================
    # 5. –£–°–ü–ï–®–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
    # ===========================================
    print("\n‚úÖ –£–°–ü–ï–®–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø")
    print("-"*40)
    
    try:
        manager.remove_user("petr")
        print(f"‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 'petr' —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω")
    except UserNotFoundError as e:
        print(f"‚úó –û—à–∏–±–∫–∞: {e}")
    
    # ===========================================
    # 6. –£–î–ê–õ–ï–ù–ò–ï –ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
    # ===========================================
    print("\n‚ö†Ô∏è –£–î–ê–õ–ï–ù–ò–ï –ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø")
    print("-"*40)
    
    try:
        manager.remove_user("petr")  # –£–∂–µ —É–¥–∞–ª—ë–Ω
        print(f"‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 'petr' —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω")
    except UserNotFoundError as e:
        print(f"‚úó –ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: {e}")
    
    # ===========================================
    # 7. –ü–†–û–í–ï–†–ö–ê –ò–¢–û–ì–û–í–û–ì–û –°–û–°–¢–û–Ø–ù–ò–Ø
    # ===========================================
    print("\nüìã –ò–¢–û–ì–û–í–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô")
    print("-"*40)
    
    if manager.users:
        for username, user in manager.users.items():
            print(f"  ‚Ä¢ {user}")
    else:
        print("  –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—É—Å—Ç")


if __name__ == "__main__":
    main()